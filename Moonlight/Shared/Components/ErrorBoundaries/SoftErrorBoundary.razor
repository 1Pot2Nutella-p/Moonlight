@using Moonlight.App.Services.Interop
@using Moonlight.App.Exceptions
@using Moonlight.App.Services
@using Logging.Net
@inherits ErrorBoundaryBase

@inject AlertService AlertService
@inject SmartTranslateService SmartTranslateService

@ChildContent

@code
{
    protected override async Task OnErrorAsync(Exception exception)
    {
        Logger.Debug(exception);
        
        if (exception is DisplayException displayException)
        {
            await AlertService.Error(
                SmartTranslateService.Translate("Error"),
                SmartTranslateService.Translate(displayException.Message)
                );
        }
        else if (exception is CloudflareException cloudflareException)
        {
            await AlertService.Error(
                SmartTranslateService.Translate("Error from cloudflare api"),
                cloudflareException.Message
                );
        }
        else if (exception is WingsException wingsException)
        {
            await AlertService.Error(
                SmartTranslateService.Translate("Error from daemon"),
                wingsException.Message
                );
        }
        else if (exception is PleskException pleskException)
        {
            await AlertService.Error(
                SmartTranslateService.Translate("Error from plesk"),
                pleskException.Message
                );
        }
        else
        {
            throw exception;
        }
    }
}